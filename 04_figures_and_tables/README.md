# `04_figures_and_tables`

This section contains the code used to generate figures and tables in the paper.

## Structure

The code structure is as follows:

- [figure_1a_dgp_logit_figure.R](#figure_1a_dgp_logit_figure.R)
- [figure_2_logit_cbp_balanced.R](#Figure.2_logit_CBP_balanced.R)
- [figure_2_logit_cbp_imbalanced.R](#Figure.2_logit_CBP_imbalanced.R)
- [table_2_supptable_4_measure_table_raw_csv.R](#table_2_supptable_4_measure_table_raw_csv.R)
- [table_2_supptable_4_measure_table_formatted_latex.py](#table_2_supptable_4_measure_table_formatted_latex.py)
- [supptable_3_logit_table_raw_csv.R](#SupTable.3_logit_table_raw_csv.R)
- [supptable_3_logit_table_formatted_latex.py](#SupTable.3_logit_table_formatted_latex.py)

### figure_1a_dgp_logit_figure.R
- Input: simulation rds file (`"../02_experiment/experiment/sim_res/DGP_sim_logit_result.rds"`).
- Output: `Figure 1(a)` in the paper.
- How to run: set up the working directory to current source file location, `setwd("/<PATH>/<TO>/<SOURCE>/<FILE>/")`, then run the code.
- This is the code for generating figure from the simulation data for `Figure 1(a)` in the paper.
- The input data is generated by `"DGP_logit_simulation.R"`
- After finish all the simulations, we first process all the PO simulation result data, then calculate the mean of the point estimation and the mean of standard errors. First we can get the bias by calculating the difference with the true value. Then we use the point estimation and standard error to calculate the 95% confidence interval. Then we get the coverage by calculating whether the confidence interval contains the true value. For each scenario, we calculate the standard deviation from the 500 simulations directly. Then we get the RMSE (Root-mean-square deviation) by using the variance (the square of standard deviation) and bias. Now we get the bias, coverage and RMSE for PO. We also extract all DSL simulation result and calculate the bias, coverage and RMSE in the same way. Then we show the PO and DSL's result in the figure.

### figure_2_logit_cbp_balanced.R
- Input: logit balanced merged csv (`"../03_postprocessing/logit_result_data/logit_balanced_sim500_boot100.csv"`).
- Output: `Figure 2, balanced` in the paper.
- How to run: set up the working directory to current source file location, `setwd("/<PATH>/<TO>/<SOURCE>/<FILE>/")`, then run the code.

### figure_2_logit_cbp_imbalanced.R
- Input: logit imbalanced merged csv (`"../03_postprocessing/logit_result_data/logit_imbalanced_sim500_boot100.csv"`).
- Output: `Figure 2, imbalanced` in the paper.
- How to run: set up the working directory to current source file location, `setwd("/<PATH>/<TO>/<SOURCE>/<FILE>/")`, then run the code.

### table_2_supptable_4_measure_table_raw_csv.R
- Input: the merged measure rds file (`"../03_postprocessing/measure_result_data/"`), and the raw binarized files (`"../01_data_and_preprocessing/measurement/binarized_datasets/"`).
- Output: A csv file that will be used to format and generate latex table in the paper (`'04_figures_and_tables/table/measurement_frame_table.csv'`).
- How to run: set up the working directory to current source file location, `setwd("/<PATH>/<TO>/<SOURCE>/<FILE>/")`, then run the code. (Note: the code includes bootstrap for calculating the standard errors)

### table_2_supptable_4_measure_table_formatted_latex.py
- Input: A csv file generated by `table_2_supptable_4_measure_table_raw_csv.R` (`'04_figures_and_tables/table/measurement_frame_table.csv'`).
- Output: Latex file that used to show Table 2 and Supplement Table 4 in the paper.
- How to run: no need to modify, directly run the code.

### supptable_3_logit_table_raw_csv.R
- Input: the merged logit rds file (`"../03_postprocessing/logit_result_data/"`), and the raw binarized files (`"../01_data_and_preprocessing/logit/cbp_data/"`).
- Output: A csv file that will be used to format and generate latex table in the paper (`'04_figures_and_tables/table/logit_frame_table.csv'`).
- How to run: set up the working directory to current source file location, `setwd("/<PATH>/<TO>/<SOURCE>/<FILE>/")`, then run the code. (Note: the code includes bootstrap for calculating the standard errors)

### supptable_3_logit_table_formatted_latex.py
- Input: A csv file generated by `supptable_3_logit_table_raw_csv.R` (`'04_figures_and_tables/table/logit_frame_table.csv'`).
- Output: Latex file that used to show Supplement Table 3 in the paper.
- How to run: no need to modify, directly run the code.
